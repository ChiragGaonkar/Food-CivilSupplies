-- DATABASE food_civil_supplies
CREATE DATABASE food_civil_supplies;

-- TABLE admin_data
CREATE TABLE admin_data(
AID INT(100) PRIMARY KEY,
AFNAME VARCHAR(200) NOT NULL,
ALNAME VARCHAR(200) NOT NULL,
AEMAIL VARCHAR(200) UNIQUE NOT NULL,
APASSWORD VARCHAR(300) NOT NULL,
ADISTRICT VARCHAR(200) NOT NULL,
AAADHARNUM BIGINT(100) UNIQUE NOT NULL
) ENGINE = INNODB;

-- TABLE user_data
CREATE TABLE user_data(	
UAADHAR BIGINT(100) PRIMARY KEY,
UEMAIL VARCHAR(100) UNIQUE NOT NULL,
UFNAME VARCHAR(100) NOT NULL,
ULNAME VARCHAR(100) NOT NULL,
UDOB DATE NOT NULL,
UGENDER VARCHAR(100) NOT NULL,
UPASSWORD VARCHAR(100) NOT NULL,
UADDRESS VARCHAR(200) NOT NULL,
UDISTRICT VARCHAR(100) NOT NULL,
UPHONE BIGINT(100) PRIMARY KEY
) ENGINE = INNODB;

-- TABLE courier_data
CREATE TABLE courier_data(
CID INT(100) PRIMARY KEY,
CFNAME VARCHAR(200) NOT NULL,
CLNAME VARCHAR(200) NOT NULL,
CEMAIL VARCHAR(200) UNIQUE NOT NULL,
CPASSWORD VARCHAR(300) NOT NULL,
CDISTRICT VARCHAR(200) NOT NULL,
CAADHARNUM BIGINT(100) UNIQUE NOT NULL
) ENGINE = INNODB;

-- TABLE product_data
CREATE TABLE product_data(
PID INT(100) PRIMARY KEY,
PNAME VARCHAR(200) NOT NULL,
QUANTITY INT(100) NOT NULL,
PTYPE VARCHAR(60) NOT NULL,
PRICE FLOAT(50) NOT NULL,
MANU_DATE DATE NOT NULL,
EXP_DATE DATE NOT NULL
) ENGINE = INNODB;

-- TABLE cart_data
CREATE TABLE cart_data(
COID INT(100) PRIMARY KEY AUTO_INCREMENT,
PID INT(100) NOT NULL,
UAADHAR BIGINT(100) NOT NULL,
CART_QUANTITY INT(50) NOT NULL,
FOREIGN KEY(PID) REFERENCES product_data(PID),
FOREIGN KEY(UAADHAR) REFERENCES user_data(UAADHAR)
)ENGINE=INNODB;

-- Incrementing COID should start from 10000(5 digit Number)
ALTER TABLE cart_data AUTO_INCREMENT = 10000;

-- Table order_data
CREATE TABLE order_data(
REFERENCEID INT(50) NOT NULL, 
COID INT(100) PRIMARY KEY,
ORDERDATE DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
DELIVERDATE DATETIME NOT NULL,
STATUS VARCHAR(100) NOT NULL,
PAYMENT VARCHAR(100) NOT NULL,
)ENGINE=INNODB;

-- Trigger to add date(DELIVERDATE) when Insertion(ORDERDATE)
CREATE TRIGGER test_trigger BEFORE INSERT ON `order_data` 
FOR EACH ROW SET
NEW.DELIVERDATE = TIMESTAMPADD(DAY,1,NEW.ORDERDATE)

-- Table payment_data
CREATE TABLE payment_data(
REFERENCEID INT(50) PRIMARY KEY,
TOTALPRICE INT(50) NOT NULL
)ENGINE = INNODB

